
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>

<script src="bundle.js"></script>
<script>
window.onload = function () {
	MIDI.loadPlugin({
		soundfontUrl: "./soundfont/",
		instrument: "tuba",
		onprogress: function(state, progress) {
			console.log(state, progress);
		},
		onsuccess: function() {
			addKeyListener();
		}
	});
};

function addKeyListener() {
	window.addEventListener('keydown', function (event) {
		var delay = 0; // play one note every quarter second
		var note =event.keyCode;
		var velocity = 127; // how hard the note hits
		// play the note
		MIDI.setVolume(0, 127);
		MIDI.noteOn(0, note, velocity, delay);
		MIDI.noteOff(0, note, delay + 0.75);
	});
}

</script>
</body>
</html>

